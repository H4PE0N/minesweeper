
BINARY_FOLDER := ../Binary-Files-Folder
OBJECT_FOLDER := ../Object-Files-Folder
SOURCE_FOLDER := ../Source-Files-Folder


GAME_FOLDER := $(SOURCE_FOLDER)/Game-Files-Folder
INTERFACE_FOLDER := $(SOURCE_FOLDER)/Interface-Files-Folder
ENGINE_FOLDER := $(SOURCE_FOLDER)/Mine-Sweeper-Engine


GAME_SOURCE_FOLDER := $(GAME_FOLDER)/Source-Files-Folder
GAME_HEADER_FOLDER := $(GAME_FOLDER)/Header-Files-Folder

INTERFACE_SOURCE_FOLDER := $(INTERFACE_FOLDER)/Source-Files-Folder
INTERFACE_HEADER_FOLDER := $(INTERFACE_FOLDER)/Header-Files-Folder

ENGINE_SOURCE_FOLDER := $(ENGINE_FOLDER)/Source-Files-Folder
ENGINE_HEADER_FOLDER := $(ENGINE_FOLDER)/Header-Files-Folder


INTERFACE_SOURCE_FILES := $(wildcard $(INTERFACE_SOURCE_FOLDER)/*.c)
INTERFACE_HEADER_FILES := $(wildcard $(INTERFACE_HEADER_FOLDER)/*.h)

ENGINE_SOURCE_FILES := $(wildcard $(ENGINE_SOURCE_FOLDER)/*.c)
ENGINE_HEADER_FILES := $(wildcard $(ENGINE_HEADER_FOLDER)/*.h)


ENGINE_OBJECT_FILES := $(patsubst $(ENGINE_SOURCE_FOLDER)/%.c, $(OBJECT_FOLDER)/%.o, $(ENGINE_SOURCE_FILES))
INTERFACE_OBJECT_FILES := $(patsubst $(INTERFACE_SOURCE_FOLDER)/%.c, $(OBJECT_FOLDER)/%.o, $(INTERFACE_SOURCE_FILES))


SOURCE_FILES := $(INTERFACE_SOURCE_FILES) $(ENGINE_SOURCE_FILES)
HEADER_FILES := $(INTERFACE_HEADER_FILES) $(ENGINE_HEADER_FILES)
OBJECT_FILES := $(INTERFACE_OBJECT_FILES) $(ENGINE_OBJECT_FILES)


COMPILE_COMPILOR := gcc
COMPILE_FLAGS := -Wall -Werror


SDL_LIB_FLAGS := -lSDL2main -lSDL2 -lSDL2_image
SDL_DIR_FLAGS := -ISDL2/include -LSDL2/lib


# This is the compile flags needed for Windows:
WIN_SDL_FLAGS := $(SDL_DIR_FLAGS) -lmingw32 $(SDL_LIB_FLAGS)

# This is the compile flags needed for MacOS:
MAC_SDL_FLAGS := `sdl2-config --libs --cflags` $(SDL_LIB_FLAGS)


EXECUTE_FLAGS := $(MAC_SDL_FLAGS) -lm


.PRECIOUS: $(OBJECT_FILES)

default-targets: mine-sweeper-program


%: $(OBJECT_FOLDER)/%.o $(OBJECT_FILES) $(GAME_SOURCE_FOLDER)/%.c $(GAME_HEADER_FOLDER)/%.h $(SOURCE_FILES) $(HEADER_FILES)
	$(COMPILE_COMPILOR) $(OBJECT_FILES) $(OBJECT_FOLDER)/$@.o $(COMPILE_FLAGS) $(EXECUTE_FLAGS) -o $@

$(OBJECT_FOLDER)/%.o: $(ENGINE_SOURCE_FOLDER)/%.c $(ENGINE_HEADER_FOLDER)/%.h
	$(COMPILE_COMPILOR) $< -c $(COMPILE_FLAGS) -o $@

$(OBJECT_FOLDER)/%.o: $(INTERFACE_SOURCE_FOLDER)/%.c $(INTERFACE_HEADER_FOLDER)/%.h
	$(COMPILE_COMPILOR) $< -c $(COMPILE_FLAGS) -o $@

$(OBJECT_FOLDER)/%.o: $(GAME_SOURCE_FOLDER)/%.c $(GAME_HEADER_FOLDER)/%.h
	$(COMPILE_COMPILOR) $< -c $(COMPILE_FLAGS) -o $@
